#!/usr/bin/env -S node --enable-source-maps
"use strict"
const e=require("@babel/runtime/helpers/defineProperty"),t=require("@babel/runtime/helpers/asyncToGenerator"),n=require("@babel/runtime/regenerator"),i=require("node:fs"),o=require("node:fs/promises"),r=require("node:path")
function s(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}})
if(e)for(const n in e)if("default"!==n){const i=Object.getOwnPropertyDescriptor(e,n)
Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>e[n]})}return t.default=e,Object.freeze(t)}const a=s(o),u=s(r)
var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=1/0,f="[object Symbol]",p=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,h=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,d="\\ud800-\\udfff",m="\\u0300-\\u036f\\ufe20-\\ufe23",g="\\u20d0-\\u20f0",y="\\u2700-\\u27bf",b="a-z\\xdf-\\xf6\\xf8-\\xff",v="A-Z\\xc0-\\xd6\\xd8-\\xde",_="\\ufe0e\\ufe0f",S="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",I="['’]",w="["+d+"]",x="["+S+"]",A="["+m+g+"]",T="\\d+",O="["+y+"]",C="["+b+"]",N="[^"+d+S+T+y+b+v+"]",k="\\ud83c[\\udffb-\\udfff]",E="[^"+d+"]",L="(?:\\ud83c[\\udde6-\\uddff]){2}",j="[\\ud800-\\udbff][\\udc00-\\udfff]",D="["+v+"]",R="\\u200d",P="(?:"+C+"|"+N+")",U="(?:"+D+"|"+N+")",B="(?:['’](?:d|ll|m|re|s|t|ve))?",F="(?:['’](?:D|LL|M|RE|S|T|VE))?",Y="(?:"+A+"|"+k+")"+"?",$="["+_+"]?",V=$+Y+("(?:"+R+"(?:"+[E,L,j].join("|")+")"+$+Y+")*"),J="(?:"+[O,L,j].join("|")+")"+V,q="(?:"+[E+A+"?",A,L,j,w].join("|")+")",M=RegExp(I,"g"),z=RegExp(A,"g"),G=RegExp(k+"(?="+k+")|"+q+V,"g"),H=RegExp([D+"?"+C+"+"+B+"(?="+[x,D,"$"].join("|")+")",U+"+"+F+"(?="+[x,D+P,"$"].join("|")+")",D+"?"+P+"+"+B,D+"+"+F,T,J].join("|"),"g"),Z=RegExp("["+R+d+m+g+_+"]"),W=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,K="object"==typeof c&&c&&c.Object===Object&&c,Q="object"==typeof self&&self&&self.Object===Object&&self,X=K||Q||Function("return this")()
var ee,te=(ee={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},function(e){return null==ee?void 0:ee[e]})
function ne(e){return Z.test(e)}function ie(e){return ne(e)?function(e){return e.match(G)||[]}(e):function(e){return e.split("")}(e)}var oe=Object.prototype.toString,re=X.Symbol,se=re?re.prototype:void 0,ae=se?se.toString:void 0
function ue(e){if("string"==typeof e)return e
if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&oe.call(e)==f}(e))return ae?ae.call(e):""
var t=e+""
return"0"==t&&1/e==-l?"-0":t}function ce(e,t,n){var i=e.length
return n=void 0===n?i:n,!t&&n>=i?e:function(e,t,n){var i=-1,o=e.length
t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0
for(var r=Array(o);++i<o;)r[i]=e[i+t]
return r}(e,t,n)}function le(e){return null==e?"":ue(e)}var fe,pe=(fe=function(e,t,n){return t=t.toLowerCase(),e+(n?de(le(t).toLowerCase()):t)},function(e){return function(e,t,n,i){var o=-1,r=e?e.length:0
for(i&&r&&(n=e[++o]);++o<r;)n=t(n,e[o],o,e)
return n}(function(e,t,n){return e=le(e),void 0===(t=n?void 0:t)?function(e){return W.test(e)}(e)?function(e){return e.match(H)||[]}(e):function(e){return e.match(p)||[]}(e):e.match(t)||[]}(function(e){return(e=le(e))&&e.replace(h,te).replace(z,"")}(e).replace(M,"")),fe,"")})
var he,de=(he="toUpperCase",function(e){var t=ne(e=le(e))?ie(e):void 0,n=t?t[0]:e.charAt(0),i=t?ce(t,1).join(""):e.slice(1)
return n[he]()+i})
var me,ge=(me=pe)&&"object"==typeof me&&"default"in me?me.default:me
function ye(e){return Array.isArray(e)?e:void 0===e?[]:function(e){return function(e){return"object"==typeof e&&null!==e}(e)&&"number"==typeof e.length}(e)||e instanceof Set?Array.from(e):[e]}function be(e){return Array.isArray(e)?e:void 0===e?[]:function(e){return function(e){return"object"==typeof e&&null!==e}(e)&&"number"==typeof e.length}(e)?Array.prototype.slice.call(e):[e]}function ve(e,t){const n=[],i=be(arguments)
return i.splice(0,2),be(e).forEach(((e,o)=>{let r=[]
i.forEach((t=>{"function"==typeof t?r=r.concat(t(e)):r.push(t)})),t(e)&&n.push({index:o,replaceWithValue:r})})),n.reverse().forEach((t=>{const n=[t.index,1].concat(t.replaceWithValue)
e.splice.apply(e,n)})),e}const _e={short:/^-([^\d-])$/,long:/^--(\S+)/,combinedShort:/^-[^\d-]{2,}$/,optEquals:/^(--\S+?)=(.*)/}
class Se extends Array{load(e){if(this.clear(),e&&e!==process.argv)e=ye(e)
else{e=process.argv.slice(0)
const t=process.execArgv.some(Oe)?1:2
e.splice(0,t)}e.forEach((e=>this.push(String(e))))}clear(){this.length=0}expandOptionEqualsNotation(){if(this.some((e=>_e.optEquals.test(e)))){const e=[]
this.forEach((t=>{const n=t.match(_e.optEquals)
n?e.push(n[1],n[2]):e.push(t)})),this.clear(),this.load(e)}}expandGetoptNotation(){this.hasCombinedShortOptions()&&ve(this,_e.combinedShort,Ie)}hasCombinedShortOptions(){return this.some((e=>_e.combinedShort.test(e)))}static from(e){const t=new this
return t.load(e),t}}function Ie(e){return(e=e.slice(1)).split("").map((e=>"-"+e))}function we(e){return _e.optEquals.test(e)}function xe(e){return(_e.short.test(e)||_e.long.test(e))&&!_e.optEquals.test(e)}function Ae(e){return _e.short.test(e)?e.match(_e.short)[1]:function(e){return _e.long.test(e)&&!we(e)}(e)?e.match(_e.long)[1]:we(e)?e.match(_e.optEquals)[1].replace(/^--/,""):null}function Te(e){return!(xe(e)||_e.combinedShort.test(e)||_e.optEquals.test(e))}function Oe(e){return["--eval","-e"].indexOf(e)>-1||e.startsWith("--eval=")}function Ce(e){return"object"==typeof e&&null!==e}function Ne(e){return void 0!==e}function ke(e){return"function"==typeof e}var Ee={isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isPlainObject:function(e){return null!==e&&"object"==typeof e&&e.constructor===Object},isArrayLike:function(e){return Ce(e)&&"number"==typeof e.length},isObject:Ce,isDefined:Ne,isFunction:ke,isClass:function(e){return!!ke(e)&&/^class /.test(Function.prototype.toString.call(e))},isPrimitive:function(e){if(null===e)return!0
switch(typeof e){case"string":case"number":case"symbol":case"undefined":case"boolean":return!0
default:return!1}},isPromise:function(e){if(e){const t=Ne(Promise)&&e instanceof Promise,n=e.then&&"function"==typeof e.then
return!(!t&&!n)}return!1},isIterable:function(e){return!(null===e||!Ne(e))&&("function"==typeof e[Symbol.iterator]||"function"==typeof e[Symbol.asyncIterator])}}
class Le{constructor(e){this.name=e.name,this.type=e.type||String,this.alias=e.alias,this.multiple=e.multiple,this.lazyMultiple=e.lazyMultiple,this.defaultOption=e.defaultOption,this.defaultValue=e.defaultValue,this.group=e.group
for(const t in e)this[t]||(this[t]=e[t])}isBoolean(){return this.type===Boolean||Ee.isFunction(this.type)&&"Boolean"===this.type.name}isMultiple(){return this.multiple||this.lazyMultiple}static create(e){return new this(e)}}class je extends Array{validate(e){this.some((e=>!e.name))&&De("INVALID_DEFINITIONS","Invalid option definitions: the `name` property is required on each definition")
let t
this.some((e=>e.type&&"function"!=typeof e.type))&&De("INVALID_DEFINITIONS","Invalid option definitions: the `type` property must be a setter fuction (default: `Boolean`)")
this.some((e=>(t=e,Ee.isDefined(e.alias)&&Ee.isNumber(e.alias))))&&De("INVALID_DEFINITIONS","Invalid option definition: to avoid ambiguity an alias cannot be numeric [--"+t.name+" alias is -"+t.alias+"]")
this.some((e=>(t=e,Ee.isDefined(e.alias)&&1!==e.alias.length)))&&De("INVALID_DEFINITIONS","Invalid option definition: an alias must be a single character")
this.some((e=>(t=e,"-"===e.alias)))&&De("INVALID_DEFINITIONS",'Invalid option definition: an alias cannot be "-"')
Pe(this.map((t=>e?t.name.toLowerCase():t.name)))&&De("INVALID_DEFINITIONS","Two or more option definitions have the same name")
Pe(this.map((t=>e&&Ee.isDefined(t.alias)?t.alias.toLowerCase():t.alias)))&&De("INVALID_DEFINITIONS","Two or more option definitions have the same alias")
this.filter((e=>!0===e.defaultOption)).length>1&&De("INVALID_DEFINITIONS","Only one option definition can be the defaultOption")
this.some((e=>(t=e,e.isBoolean()&&e.defaultOption)))&&De("INVALID_DEFINITIONS",`A boolean option ["${t.name}"] can not also be the defaultOption.`)}get(e,t){if(xe(e)){if(_e.short.test(e)){const n=Ae(e)
if(t){const e=n.toLowerCase()
return this.find((t=>Ee.isDefined(t.alias)&&t.alias.toLowerCase()===e))}return this.find((e=>e.alias===n))}{const n=Ae(e)
if(t){const e=n.toLowerCase()
return this.find((t=>t.name.toLowerCase()===e))}return this.find((e=>e.name===n))}}return this.find((t=>t.name===e))}getDefault(){return this.find((e=>!0===e.defaultOption))}isGrouped(){return this.some((e=>e.group))}whereGrouped(){return this.filter(Re)}whereNotGrouped(){return this.filter((e=>!Re(e)))}whereDefaultValueSet(){return this.filter((e=>Ee.isDefined(e.defaultValue)))}static from(e,t){if(e instanceof this)return e
const n=super.from(ye(e),(e=>Le.create(e)))
return n.validate(t),n}}function De(e,t){const n=new Error(t)
throw n.name=e,n}function Re(e){return ye(e.group).some((e=>e))}function Pe(e){const t={}
for(let n=0;n<e.length;n++){const i=e[n]
if(t[i])return!0
Ee.isDefined(i)&&(t[i]=!0)}}class Ue{constructor(e,t){this.options=Object.assign({},t),this.definitions=je.from(e,this.options.caseInsensitive),this.argv=Se.from(this.options.argv),this.argv.hasCombinedShortOptions()&&ve(this.argv,_e.combinedShort.test.bind(_e.combinedShort),(e=>(e=e.slice(1)).split("").map((t=>({origArg:`-${e}`,arg:"-"+t})))))}*[Symbol.iterator](){const e=this.definitions
let t,n,i,o,r,s=!1,a=!1
for(let u of this.argv){if(Ee.isPlainObject(u)&&(r=u.origArg,u=u.arg),a&&this.options.stopAtFirstUnknown){yield{event:"unknown_value",arg:u,name:"_unknown",value:void 0}
continue}if(xe(u))t=e.get(u,this.options.caseInsensitive),n=void 0,t?(n=!!t.isBoolean()||null,o="set"):o="unknown_option"
else if(we(u)){const i=u.match(_e.optEquals)
t=e.get(i[1],this.options.caseInsensitive),t?t.isBoolean()?(yield{event:"unknown_value",arg:u,name:"_unknown",value:n,def:t},o="set",n=!0):(o="set",n=i[2]):o="unknown_option"}else Te(u)&&(t?(n=u,o="set"):(t=this.definitions.getDefault(),t&&!s?(n=u,o="set"):(o="unknown_value",t=void 0)))
i=t?t.name:"_unknown"
const c={event:o,arg:u,name:i,value:n,def:t}
r&&(c.subArg=u,c.arg=r),yield c,"_unknown"===i&&(a=!0),t&&t.defaultOption&&!t.isMultiple()&&"set"===o&&(s=!0),t&&t.isBoolean()&&(t=void 0),t&&!t.multiple&&Ee.isDefined(n)&&null!==n&&(t=void 0),n=void 0,o=void 0,i=void 0,r=void 0}}}const Be=new WeakMap
class Fe{constructor(e){this.definition=new Le(e),this.state=null,this.resetToDefault()}get(){return Be.get(this)}set(e){this._set(e,"set")}_set(e,t){const n=this.definition
if(n.isMultiple()){if(null!=e){const i=this.get()
"default"===this.state&&(i.length=0),i.push(n.type(e)),this.state=t}}else{if(!n.isMultiple()&&"set"===this.state){const t=new Error(`Singular option already set [${this.definition.name}=${this.get()}]`)
throw t.name="ALREADY_SET",t.value=e,t.optionName=n.name,t}null==e?Be.set(this,e):(Be.set(this,n.type(e)),this.state=t)}}resetToDefault(){Ee.isDefined(this.definition.defaultValue)?this.definition.isMultiple()?Be.set(this,ye(this.definition.defaultValue).slice()):Be.set(this,this.definition.defaultValue):this.definition.isMultiple()?Be.set(this,[]):Be.set(this,null),this.state="default"}static create(e){return(e=new Le(e)).isBoolean()?Ye.create(e):new this(e)}}class Ye extends Fe{set(e){super.set(!0)}static create(e){return new this(e)}}class $e extends Map{constructor(e){super(),this.definitions=je.from(e),this.set("_unknown",Fe.create({name:"_unknown",multiple:!0}))
for(const e of this.definitions.whereDefaultValueSet())this.set(e.name,Fe.create(e))}toObject(e){e=e||{}
const t={}
for(const n of this){const i=e.camelCase&&"_unknown"!==n[0]?ge(n[0]):n[0],o=n[1];("_unknown"!==i||o.get().length)&&(t[i]=o.get())}return e.skipUnknown&&delete t._unknown,t}}class Ve extends $e{toObject(e){const t=super.toObject({skipUnknown:e.skipUnknown}),n=super.toObject(e),i=n._unknown
delete n._unknown
const o={_all:n}
return i&&i.length&&(o._unknown=i),this.definitions.whereGrouped().forEach((n=>{const i=e.camelCase?ge(n.name):n.name,r=t[n.name]
for(const e of ye(n.group))o[e]=o[e]||{},Ee.isDefined(r)&&(o[e][i]=r)})),this.definitions.whereNotGrouped().forEach((n=>{const i=e.camelCase?ge(n.name):n.name,r=t[n.name]
Ee.isDefined(r)&&(o._none||(o._none={}),o._none[i]=r)})),o}}var Je=function(e,t){(t=t||{}).stopAtFirstUnknown&&(t.partial=!0),e=je.from(e,t.caseInsensitive)
const n=new Ue(e,{argv:t.argv,stopAtFirstUnknown:t.stopAtFirstUnknown,caseInsensitive:t.caseInsensitive}),i=new(e.isGrouped()?Ve:$e)(e)
for(const e of n){const n=e.subArg||e.arg
if(!t.partial){if("unknown_value"===e.event){const e=new Error(`Unknown value: ${n}`)
throw e.name="UNKNOWN_VALUE",e.value=n,e}if("unknown_option"===e.event){const e=new Error(`Unknown option: ${n}`)
throw e.name="UNKNOWN_OPTION",e.optionName=n,e}}let o
i.has(e.name)?o=i.get(e.name):(o=Fe.create(e.def),i.set(e.name,o)),"_unknown"===e.name?o.set(n):o.set(e.value)}return i.toObject({skipUnknown:!t.partial,camelCase:t.camelCase})},qe=Je([{name:"cli-only",type:Boolean,group:"selector"},{name:"update-gitignore",type:Boolean,group:"selector"},{name:"lib-only",type:Boolean,group:"selector"},{name:"update-makefile",type:Boolean,group:"selector"},{name:"with-cli",type:Boolean,group:"selector"},{name:"no-makefile",type:Boolean,group:"selector"},{name:"src",type:String,group:"path"},{name:"cli-path-suffix",type:String,group:"path"},{name:"cli-entry-file",type:String,group:"path"},{name:"lib-path-suffix",type:String,group:"path"},{name:"lib-entry-file",type:String,group:"path"},{name:"name",type:String,group:"name"},{name:"cli-name",type:String,group:"name"},{name:"with-sourcemaps-test",type:Boolean}]),Me=qe.selector,ze=qe.path,Ge=qe.name,He=ze.src||"src",Ze=!0===Me["update-gitignore"]||!0===Me["update-makefile"],We=!0!==Ze&&!0!==Me["lib-only"]&&(!0===Me["cli-only"]||!0===Me["with-cli"]),Ke=!0!==Ze&&!0!==Me["cli-only"]||2===process.argv.length,Qe=!0===Me["update-makefile"]||!0!==Me["update-gitignore"]&&!0!==Me["no-makefile"],Xe=!0!==qe._all["with-sourcemaps-test"],et=!0===Me["update-gitignore"],tt=function(){var i=t(n.mark((function t(i){var o,r
return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=rt(i),r=o+"-cli",i.bin=e({},o,"dist/".concat(r,".js")),t.next=5,a.writeFile("package.json",JSON.stringify(i,null,"  "))
case 5:case"end":return t.stop()}}),t)})))
return function(e){return i.apply(this,arguments)}}(),nt=function(){var e=t(n.mark((function e(){var t,i,o
return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.join(__dirname,Ke?"bootstrap":"bootstrap-cli-only"),!0!==We||!0!==Ke){e.next=7
break}return i=u.join(He,"lib"),e.next=5,a.cp(t,He,{recursive:!0})
case 5:case 10:e.next=16
break
case 7:if(!0!==We){e.next=12
break}return e.next=10,a.cp(u.join(t),He,{recursive:!0})
case 12:if(!0!==Ke){e.next=16
break}return i=He,e.next=16,a.cp(u.join(t,"lib"),He,{recursive:!0})
case 16:if(!Ke||!0!==Xe){e.next=20
break}return o=u.join(i,"test","sourcemaps.test.js"),e.next=20,a.rm(o)
case 20:case"end":return e.stop()}}),e)})))
return function(){return e.apply(this,arguments)}}(),it=function(){var e=t(n.mark((function e(){var t
return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.join(__dirname,"gitignore"),".gitignore",e.next=4,a.cp(t,".gitignore")
case 4:case"end":return e.stop()}}),e)})))
return function(){return e.apply(this,arguments)}}(),ot=function(){var e=t(n.mark((function e(t){var i,o,r,s,c,l,f,p,h,d,m,g,y,b
return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.pkgJSON,o=rt(i),r="BUILD_KEY:=".concat(o,"\nSRC:=").concat(He,"\n"),s=Ze&&(!0===Me["with-cli"]||Me["cli-only"])||We,c=Ze&&!0!==Me["cli-only"]||Ke,l=ze["cli-path-suffix"]||"cli",f=ze["lib-path-suffix"]||"lib",p=ze["cli-entry-file"]||"index.js",h=ze["lib-entry-file"]||"index.js",d=(Ge["cli-name"]||!0===s&&!1===c&&Ge.name||o+"-cli")+".js",!0===s&&!0===c?(r+="CATALYST_JS_LIB_SRC_PATH:=$(SRC)/".concat(f,"\n"),r+="CATALYST_NODE_PROJECT_LIB_ENTRY_POINT=$(CATALYST_JS_LIB_SRC_PATH)/".concat(h,"\n"),r+="CATALYST_JS_CLI_SRC_PATH:=$(SRC)/".concat(l,"\n"),r+="CATALYST_NODE_PROJECT_CLI_ENTRY_POINT=$(CATALYST_JS_CLI_SRC_PATH)/".concat(p,"\n"),r+="CATALYST_JS_CLI=$(DIST)/".concat(d,"\n")):!0===s?(m=void 0!==ze["cli-path-suffix"]?u.join("$(SRC)",l):"$(SRC)",r+="CATALYST_JS_CLI_SRC_PATH:=".concat(m,"\n"),r+="CATALYST_NODE_PROJECT_CLI_ENTRY_POINT=$(CATALYST_JS_CLI_SRC_PATH)/".concat(p,"\n"),r+="CATALYST_JS_CLI=$(DIST)/".concat(d,"\n")):c?(g=void 0!==ze["lib-path-suffix"]?u.join("$(SRC)",f):"$(SRC)",r+="CATALYST_JS_LIB_SRC_PATH:=".concat(g,"\n"),r+="CATALYST_NODE_PROJECT_LIB_ENTRY_POINT=$(CATALYST_JS_LIB_SRC_PATH)/".concat(h,"\n")):(console.error("Could not determine Makefile preamble; check options or submit bug report."),process.exit(13)),e.next=13,a.writeFile("Makefile",r)
case 13:return y=u.join(__dirname,"make","javascript.mk"),e.next=16,a.readFile(y,{encoding:"utf8"})
case 16:return b=e.sent,e.next=19,a.appendFile("Makefile",b)
case 19:case"end":return e.stop()}}),e)})))
return function(t){return e.apply(this,arguments)}}(),rt=function(e){return void 0!==Ge.name?Ge.name:e.name.replace(/^@[^/]+\//,"")}
t(n.mark((function e(){var t,o
return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,a.readFile("package.json",{encoding:"utf8"})
case 3:return e.t1=e.sent,t=e.t0.parse.call(e.t0,e.t1),o=[],(We||Ke)&&(console.log("Setting up package..."),i.existsSync(He)&&(console.error("Source path '".concat(He,"' already present.")),process.exit(0)),o.push(nt()),!0===We&&o.push(tt(t))),!0===et&&o.push(it()),!0===Qe&&o.push(ot({pkgJSON:t})),e.next=11,Promise.all(o)
case 11:process.exit(0)
case 12:case"end":return e.stop()}}),e)})))()
//# sourceMappingURL=catalyst-scripts-node-project.js.map
